# ğŸš€ LinguaFlow éƒ¨ç½²å¿«é€ŸæŒ‡å—

## ğŸ“‹ æŠ€æœ¯æ¶æ„

**å‰ç«¯**: Next.js 15 â†’ **Vercel** (æ¨è) âœ…  
**åç«¯**: Supabase (PostgreSQL + Auth + Storage + Realtime) âœ…

---

## ä¸€ã€åç«¯éƒ¨ç½² - Supabase (5åˆ†é’Ÿ)

### 1. åˆ›å»ºé¡¹ç›®

1. è®¿é—® https://supabase.com å¹¶ç™»å½•
2. ç‚¹å‡» **New Project**
3. å¡«å†™ä¿¡æ¯:
   - é¡¹ç›®åç§°: `linguaflow-prod`
   - æ•°æ®åº“å¯†ç : (ç”Ÿæˆå¹¶ä¿å­˜)
   - åŒºåŸŸ: **Singapore** (ä¸­å›½ç”¨æˆ·æœ€å¿«)
   - è®¡åˆ’: **Free Plan** (å¼€å‘) æˆ– **Pro Plan** ($25/æœˆï¼Œç”Ÿäº§)

### 2. åˆå§‹åŒ–æ•°æ®åº“

åœ¨ Supabase Dashboard:
1. å·¦ä¾§èœå• â†’ **SQL Editor**
2. ç‚¹å‡» **New Query**
3. å¤åˆ¶ `supabase/migrations/20250124000001_initial_schema.sql` æ–‡ä»¶å†…å®¹
4. ç²˜è´´å¹¶ç‚¹å‡» **Run**

### 3. è·å– API å¯†é’¥

**Settings** â†’ **API** â†’ å¤åˆ¶:
```
Project URL: https://xxxxx.supabase.co
anon public key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

âœ… åç«¯é…ç½®å®Œæˆï¼

---

## äºŒã€å‰ç«¯éƒ¨ç½² - Vercel (3åˆ†é’Ÿ)

### 1. æ¨é€ä»£ç åˆ° GitHub

```bash
git add .
git commit -m "Ready for deployment"
git push origin main
```

### 2. å¯¼å…¥é¡¹ç›®åˆ° Vercel

1. è®¿é—® https://vercel.com å¹¶ç™»å½•
2. ç‚¹å‡» **Add New** â†’ **Project**
3. é€‰æ‹©ä½ çš„ GitHub ä»“åº“
4. ç‚¹å‡» **Import**

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­:  
**Settings** â†’ **Environment Variables** â†’ æ·»åŠ :

```bash
# å¿…éœ€
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_ENABLE_BACKEND_SYNC=true

# å¯é€‰
NEXT_PUBLIC_APP_URL=https://yourdomain.com
```

### 4. éƒ¨ç½²

ç‚¹å‡» **Deploy** â†’ ç­‰å¾… 2-3 åˆ†é’Ÿ âœ…

è®¿é—®: `https://your-project.vercel.app`

---

## ä¸‰ã€è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

### åœ¨ Vercel é…ç½®

1. **Settings** â†’ **Domains**
2. è¾“å…¥åŸŸå: `linguaflow.com`
3. æŒ‰æç¤ºé…ç½® DNS

### DNS é…ç½®ï¼ˆæ¨èä½¿ç”¨ Cloudflareï¼‰

```
ç±»å‹: A
åç§°: @
å†…å®¹: 76.76.21.21
```

ç­‰å¾… 5-30 åˆ†é’Ÿç”Ÿæ•ˆã€‚

---

## å››ã€Supabase é¢å¤–é…ç½®

### å¯ç”¨å®æ—¶è®¢é˜…

**Database** â†’ **Replication** â†’ å‹¾é€‰:
- âœ… `feed_cards`
- âœ… `interactions`
- âœ… `user_progress`

### é…ç½®å­˜å‚¨æ¡¶

**Storage** â†’ åˆ›å»ºæ¡¶:
1. `avatars` (ç”¨æˆ·å¤´åƒ) - Public
2. `covers` (å°é¢å›¾) - Public
3. `media` (éŸ³è§†é¢‘) - Public

### é…ç½®è®¤è¯

**Authentication** â†’ **Providers** â†’ å¯ç”¨:
- âœ… Email/Password
- âœ… Magic Link
- å¯é€‰: Google, GitHub ç­‰

**URL Configuration** â†’ æ·»åŠ å›è°ƒåœ°å€:
```
https://yourdomain.com/auth/callback
```

---

## äº”ã€æˆæœ¬ä¼°ç®—

### å…è´¹æ–¹æ¡ˆï¼ˆå¼€å‘é˜¶æ®µï¼‰
- Vercel Hobby: **å…è´¹** (100GB å¸¦å®½)
- Supabase Free: **å…è´¹** (500MB æ•°æ®åº“, 1GB å­˜å‚¨)
- **æ€»è®¡: $0/æœˆ** âœ…

### ç”Ÿäº§æ–¹æ¡ˆï¼ˆå°è§„æ¨¡ï¼‰
- Vercel Pro: **$20/æœˆ** (1TB å¸¦å®½)
- Supabase Pro: **$25/æœˆ** (8GB æ•°æ®åº“, 100GB å­˜å‚¨)
- **æ€»è®¡: $45/æœˆ** (å¯æ”¯æŒæ•°åƒç”¨æˆ·)

---

## å…­ã€éƒ¨ç½²æ£€æŸ¥æ¸…å•

### Supabase é…ç½®
- [ ] é¡¹ç›®å·²åˆ›å»º
- [ ] æ•°æ®åº“è¡¨å·²åˆ›å»ºï¼ˆè¿è¡Œ SQLï¼‰
- [ ] API å¯†é’¥å·²å¤åˆ¶
- [ ] Realtime å·²å¯ç”¨
- [ ] å­˜å‚¨æ¡¶å·²åˆ›å»º
- [ ] è®¤è¯å·²é…ç½®

### Vercel é…ç½®
- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] é¡¹ç›®å·²å¯¼å…¥ Vercel
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] éƒ¨ç½²æˆåŠŸ
- [ ] ç½‘ç«™å¯è®¿é—®

### åŠŸèƒ½æµ‹è¯•
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] Feed æµæ˜¾ç¤ºæ•°æ®
- [ ] å›¾ç‰‡æ­£å¸¸åŠ è½½
- [ ] ç”¨æˆ·å¯ä»¥ç™»å½•/æ³¨å†Œ
- [ ] å®æ—¶æ›´æ–°åŠŸèƒ½æ­£å¸¸

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### 1. è¿æ¥ Supabase å¤±è´¥

**æ£€æŸ¥**:
```bash
# ç¡®è®¤ç¯å¢ƒå˜é‡
- NEXT_PUBLIC_SUPABASE_URL æ˜¯å¦æ­£ç¡®
- NEXT_PUBLIC_SUPABASE_ANON_KEY æ˜¯å¦æ­£ç¡®
- NEXT_PUBLIC_ENABLE_BACKEND_SYNC=true
```

### 2. RLS ç­–ç•¥é˜»æ­¢è®¿é—®

åœ¨ Supabase SQL Editor æ‰§è¡Œ:
```sql
-- æ£€æŸ¥ç­–ç•¥
SELECT * FROM pg_policies WHERE tablename = 'feed_cards';

-- ä¸´æ—¶ç¦ç”¨ï¼ˆä»…æµ‹è¯•ï¼‰
ALTER TABLE public.feed_cards DISABLE ROW LEVEL SECURITY;
```

### 3. Vercel æ„å»ºå¤±è´¥

```bash
# æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°éƒ¨ç½²
åœ¨ Vercel Dashboard â†’ Deployments â†’ Redeploy
```

### 4. ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

- ä¿®æ”¹ç¯å¢ƒå˜é‡åå¿…é¡» **é‡æ–°éƒ¨ç½²**
- åœ¨ Deployments â†’ ... â†’ Redeploy

---

## å…«ã€æœ¬åœ°å¼€å‘é…ç½®

åˆ›å»º `.env.local` æ–‡ä»¶:

```bash
# å¼€å‘ç¯å¢ƒä½¿ç”¨æœ¬åœ°å­˜å‚¨
NEXT_PUBLIC_ENABLE_BACKEND_SYNC=false
NEXT_PUBLIC_APP_URL=http://localhost:3000

# å¦‚æœè¦æµ‹è¯• Supabase
# NEXT_PUBLIC_ENABLE_BACKEND_SYNC=true
# NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key
```

å¯åŠ¨å¼€å‘æœåŠ¡å™¨:
```bash
pnpm dev
```

---

## ä¹ã€ä¸‹ä¸€æ­¥ä¼˜åŒ–

- [ ] é…ç½® Cloudflare CDN åŠ é€Ÿ
- [ ] è®¾ç½®è‡ªåŠ¨å¤‡ä»½ï¼ˆSupabaseï¼‰
- [ ] æ·»åŠ ç›‘æ§å‘Šè­¦ï¼ˆSentryï¼‰
- [ ] é…ç½® CI/CDï¼ˆGitHub Actionsï¼‰
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
- [ ] å®‰å…¨å®¡è®¡

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹å®Œæ•´çš„éƒ¨ç½²æŒ‡å—: [DEPLOYMENT_GUIDE.md](../DEPLOYMENT_GUIDE.md)

---

## ğŸ”— ç›¸å…³èµ„æº

- [Vercel æ–‡æ¡£](https://vercel.com/docs)
- [Supabase æ–‡æ¡£](https://supabase.com/docs)
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)

---

**ç¥éƒ¨ç½²é¡ºåˆ©! ğŸ‰**

æœ‰é—®é¢˜å¯ä»¥æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–åœ¨ç¤¾åŒºå¯»æ±‚å¸®åŠ©ã€‚

