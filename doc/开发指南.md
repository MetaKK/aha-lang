# ğŸ› ï¸ LinguaFlow å¼€å‘æŒ‡å—

## ğŸ“‹ å¼€å‘ç¯å¢ƒé…ç½®

### ç¯å¢ƒè¦æ±‚
- Node.js >= 20
- pnpm >= 9
- Git

### å¿«é€Ÿå¯åŠ¨
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd linguaflow

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# 4. è®¿é—®åº”ç”¨
# æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
```

## ğŸ”Œ API æ¥å£

### åŸºç¡€é…ç½®
- **Base URL**: `https://your-domain.vercel.app/api`
- **è®¤è¯æ–¹å¼**: JWT Bearer Token
- **å“åº”æ ¼å¼**: ç»Ÿä¸€JSONæ ¼å¼

### æ ¸å¿ƒæ¥å£

#### Feed æµæ¥å£
```typescript
// è·å– Feed æµ
GET /api/feed?page=1&pageSize=20&type=novel

// è·å–å¡ç‰‡è¯¦æƒ…
GET /api/feed/:id

// åˆ›å»ºå¡ç‰‡
POST /api/feed
Authorization: Bearer <token>
```

#### ç”¨æˆ·æ¥å£
```typescript
// è·å–ç”¨æˆ·èµ„æ–™
GET /api/users/:id

// æ›´æ–°ç”¨æˆ·èµ„æ–™
PUT /api/users/:id
Authorization: Bearer <token>
```

#### äº’åŠ¨æ¥å£
```typescript
// åˆ›å»ºäº’åŠ¨ï¼ˆç‚¹èµã€è¯„è®ºç­‰ï¼‰
POST /api/interactions
Authorization: Bearer <token>

// åˆ é™¤äº’åŠ¨
DELETE /api/interactions?targetId=xxx&type=like
Authorization: Bearer <token>
```

### ç»Ÿä¸€å“åº”æ ¼å¼
```typescript
// æˆåŠŸå“åº”
{
  "success": true,
  "data": { ... },
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2025-01-25T10:00:00.000Z"
}

// é”™è¯¯å“åº”
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°",
    "details": { ... }
  },
  "timestamp": "2025-01-25T10:00:00.000Z"
}
```

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
linguaflow/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (main)/            # ä¸»åº”ç”¨å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ feed/          # Feed æµé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ post/[id]/     # å¸–å­è¯¦æƒ…é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx       # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ feed/              # Feed ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ cards/         # å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ feed-header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ feed-list.tsx
â”‚   â”‚   â”‚   â””â”€â”€ post-card/     # å¸–å­å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ novel-card.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ text-card.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ media-card.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ post-author.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ post-content.tsx
â”‚   â”‚   â”‚       â””â”€â”€ post-actions.tsx
â”‚   â”‚   â”œâ”€â”€ providers/         # Context Providers
â”‚   â”‚   â”‚   â”œâ”€â”€ theme-provider.tsx
â”‚   â”‚   â”‚   â””â”€â”€ query-provider.tsx
â”‚   â”‚   â””â”€â”€ ui/                # UI ç»„ä»¶åº“
â”‚   â”‚       â”œâ”€â”€ badge.tsx
â”‚   â”‚       â”œâ”€â”€ button.tsx
â”‚   â”‚       â””â”€â”€ card.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ use-like.ts
â”‚   â”‚   â””â”€â”€ use-realtime.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                   # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ api/               # API å±‚
â”‚   â”‚   â”‚   â””â”€â”€ feed.ts
â”‚   â”‚   â”œâ”€â”€ challenges/        # æŒ‘æˆ˜ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ plugin-system.ts
â”‚   â”‚   â”‚   â””â”€â”€ plugins/
â”‚   â”‚   â”‚       â””â”€â”€ vocabulary-plugin.tsx
â”‚   â”‚   â”œâ”€â”€ storage/           # å­˜å‚¨ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ hyper-storage.ts
â”‚   â”‚   â”œâ”€â”€ supabase/          # Supabase å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â”‚   â””â”€â”€ server.ts
â”‚   â”‚   â”œâ”€â”€ sync/              # æ•°æ®åŒæ­¥
â”‚   â”‚   â”‚   â”œâ”€â”€ data-sync.ts
â”‚   â”‚   â”‚   â””â”€â”€ schema-version.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                 # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ feed.ts
â”‚   â”‚   â”œâ”€â”€ learn.ts
â”‚   â”‚   â””â”€â”€ supabase.ts
â”‚   â”‚
â”‚   â””â”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ constants.ts
â”‚
â”œâ”€â”€ supabase/                  # Supabase é…ç½®
â”‚   â””â”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”‚       â””â”€â”€ 20250124000001_initial_schema.sql
â”‚
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â””â”€â”€ manifest.json
â”‚
â”œâ”€â”€ doc/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md
â”‚   â”œâ”€â”€ é¡¹ç›®æ¦‚è¿°.md
â”‚   â”œâ”€â”€ æ¶æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md
â”‚   â”œâ”€â”€ åŠŸèƒ½æµ‹è¯•.md
â”‚   â”œâ”€â”€ é¡¹ç›®ä½¿ç”¨æ–‡æ¡£.md
â”‚   â””â”€â”€ å¼€å‘æŒ‡å—.md
â”‚
â”œâ”€â”€ scripts/                   # è„šæœ¬
â”‚   â””â”€â”€ check-data-sync.ts
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ next.config.ts
â”œâ”€â”€ postcss.config.mjs
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ start.sh
```

---

## ğŸ¨ æ ¸å¿ƒåŠŸèƒ½

### Feed æµç³»ç»Ÿ
- **å¡ç‰‡ç±»å‹**: novel, text, media, audio, ad, quote, repost
- **ä¸»è¦ç»„ä»¶**: FeedListSimple, PostCard, QuestCard, TextCard, MediaCard
- **çŠ¶æ€ç®¡ç†**: Zustand + React Query
- **å®æ—¶æ›´æ–°**: Supabase Realtime

### è®¤è¯ç³»ç»Ÿ
- **ç™»å½•æ³¨å†Œ**: å®Œæ•´çš„ç”¨æˆ·è®¤è¯æµç¨‹
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **å®‰å…¨ç‰¹æ€§**: JWT Token + RLS

### æ•°æ®ç®¡ç†
- **æœ¬åœ°å­˜å‚¨**: IndexedDB + localStorage (å¼€å‘æ¨¡å¼)
- **äº‘ç«¯åŒæ­¥**: Supabase (ç”Ÿäº§æ¨¡å¼)
- **Mockæ•°æ®**: å®Œæ•´çš„æµ‹è¯•æ•°æ®

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ
```bash
# ç¯å¢ƒå˜é‡
NEXT_PUBLIC_ENABLE_BACKEND_SYNC=false  # æœ¬åœ°å­˜å‚¨æ¨¡å¼
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# ç¯å¢ƒå˜é‡
NEXT_PUBLIC_ENABLE_BACKEND_SYNC=true
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

## ğŸš€ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
pnpm dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start            # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm type-check       # ç±»å‹æ£€æŸ¥
pnpm lint             # ä»£ç æ£€æŸ¥
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ¶æ„è®¾è®¡](./æ¶æ„è®¾è®¡.md) - å®Œæ•´æŠ€æœ¯æ¶æ„
- [APIæ–‡æ¡£](./APIæ–‡æ¡£.md) - åç«¯æ¥å£è§„èŒƒ
- [è®¤è¯ç³»ç»Ÿ](./è®¤è¯ç³»ç»Ÿå®Œæ•´æ–‡æ¡£.md) - ç™»å½•æ³¨å†Œç³»ç»Ÿ
- [é¡¹ç›®ä½¿ç”¨æ–‡æ¡£](./é¡¹ç›®ä½¿ç”¨æ–‡æ¡£.md) - è¯¦ç»†ä½¿ç”¨è¯´æ˜

---

**Made with â¤ï¸ by LinguaFlow Team**
