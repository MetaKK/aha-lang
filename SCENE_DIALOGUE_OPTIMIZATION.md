# åœºæ™¯å¯¹è¯ç³»ç»Ÿä¼˜åŒ–æŠ¥å‘Š

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

åŸºäºä¸šå†…AIæ–‡å­—æ•…äº‹æœ€ä½³å®è·µï¼ˆå‚è€ƒDungeon AIã€Character.AIï¼‰ï¼Œç»“åˆè‹±è¯­æ•™å­¦éœ€æ±‚ï¼Œå®ç°ä¸‰å¤§æ ¸å¿ƒä¼˜åŒ–ï¼š
1. **åœºæ™¯åˆ»ç”»+è§’è‰²å¯¹è¯èåˆ**ï¼šæ¯è½®AIå›åº”åŒ…å«ç”µå½±çº§åœºæ™¯æå†™å’Œè‡ªç„¶å¯¹è¯
2. **æµç•…è¿‡æ¸¡ä½“éªŒ**ï¼šæ¶ˆé™¤é˜…è¯»åˆ°ç»ƒä¹ çš„é»‘å±ç­‰å¾…
3. **ç»Ÿä¸€ç”¨æˆ·æµç¨‹**ï¼šå•ç« èŠ‚å’Œå¤šç« èŠ‚éƒ½è¿›å…¥åœºæ™¯ç»ƒä¹ 

---

## ğŸ“‹ ä¼˜åŒ–æ¸…å•

### âœ… 1. åœºæ™¯å¯¹è¯Prompté©å‘½æ€§å‡çº§

#### ğŸ¬ æ ¸å¿ƒå˜é©ï¼šä»"å¯¹è¯"åˆ°"æ´»ç€çš„åœºæ™¯"

**ä¼˜åŒ–å‰é—®é¢˜**ï¼š
- âŒ AIåªå›å¤å¯¹è¯æ–‡æœ¬ï¼Œç¼ºå°‘ç¯å¢ƒæå†™
- âŒ ç¼ºå°‘è§’è‰²å†…å¿ƒæ´»åŠ¨çš„å±•ç°
- âŒ åœºæ™¯é™æ€ï¼Œæ²¡æœ‰"æ´»"çš„æ„Ÿè§‰

**ä¼˜åŒ–åäº®ç‚¹**ï¼š
```typescript
**CINEMATIC RESPONSE FORMAT (Like Dungeon AI / Character.AI):**

Structure EVERY response with:

1ï¸âƒ£ SCENE SNAPSHOT (20-40 words)
   - What CHANGES in the environment after they speak?
   - Body language, micro-expressions, atmosphere shifts
   - Sensory details: sound, light, smell, temperature

2ï¸âƒ£ INNER REACTION (Optional, 10-15 words)
   - Brief glimpse of what I'm THINKING but not saying
   - Parenthetical, vulnerable, raw

3ï¸âƒ£ DIALOGUE (1-2 sentences, natural speech)
   - What I actually SAY - short, natural, imperfect
   - Match emotional state
```

#### ğŸ¨ ç”µå½±åŒ–æŠ€å·§åº“

AIç°åœ¨ä¼šä½¿ç”¨6å¤§ç”µå½±æŠ€å·§ï¼š
- ğŸ¬ **Camera angle**: "From where I stand..." / "Above us..."
- ğŸ’¡ **Lighting shift**: "Shadows deepen" / "Morning light breaks"
- ğŸ”Š **Sound design**: "Silence stretches" / "A door slams somewhere"
- ğŸ­ **Micro-expressions**: "My jaw tightens" / "Something flickers in my eyes"
- â±ï¸ **Time dilation**: "For a heartbeat, nothing moves"
- ğŸŒ¡ï¸ **Temperature**: "Cold creeps up my spine" / "Heat rises to my face"

#### ğŸ“ ç¤ºä¾‹å¯¹æ¯”

**ä¼˜åŒ–å‰AIå›åº”**ï¼š
```
"That's interesting. I understand your concern. Let me explain..."
```

**ä¼˜åŒ–åAIå›åº”**ï¼š
```
The letter slips from my fingers. It drifts to the floor, impossibly slow. 
Behind me, Uncle Vernon's footsteps stop. I can feel his eyes boring into my back.

(This is it. Everything changes now.)

"I..." My voice cracks. I clear my throat. "I don't understand. A school for what?"
```

---

### âœ… 2. é˜…è¯»åˆ°ç»ƒä¹ è¿‡æ¸¡ä¼˜åŒ–

#### é—®é¢˜ï¼šé»‘å±ç­‰å¾…ç ´åæ²‰æµ¸æ„Ÿ

**ä¼˜åŒ–å‰**ï¼š
- ç®€å•çš„loading spinner
- é»‘è‰²èƒŒæ™¯
- é™æ€æ–‡å­—æç¤º

**ä¼˜åŒ–å**ï¼š
- âœ¨ **é­”æ³•åœ†ç¯åŠ¨ç”»**ï¼šä¸‰å±‚æ—‹è½¬åœ†ç¯ï¼Œä¸­å¿ƒè„‰åŠ¨æ˜Ÿæ˜Ÿ
- ğŸŒŠ **èƒŒæ™¯ç²’å­åŠ¨ç”»**ï¼šæ¸å˜è‰²çƒä½“ç¼“æ…¢æ—‹è½¬æ¼‚æµ®
- ğŸ“ **åˆ†æ­¥éª¤æç¤º**ï¼š
  - "Choosing the perfect scene"
  - "Building atmosphere"  
  - "Creating dialogue"
- ğŸ¬ **å¹³æ»‘è¿‡æ¸¡**ï¼šä½¿ç”¨Framer Motionçš„initial/animate/exit

```typescript
<motion.div 
  initial={{ opacity: 0 }}
  animate={{ opacity: 1 }}
  exit={{ opacity: 0 }}
>
  {/* é­”æ³•åœ†ç¯ + èƒŒæ™¯ç²’å­ + æ­¥éª¤æç¤º */}
</motion.div>
```

---

### âœ… 3. å•ç« èŠ‚æµç¨‹ä¿®å¤

#### é—®é¢˜ï¼šå•ç« èŠ‚é˜…è¯»åè¿›å…¥challengeè€Œépractice

**ä¼˜åŒ–å‰è·¯ç”±é€»è¾‘**ï¼š
```typescript
if (contentType === 'novel') {
  router.push(`/content/${contentType}/${contentId}/challenge`);
} else if (contentType === 'quest') {
  router.push(`/content/${contentType}/${contentId}/practice`);
}
```

**ä¼˜åŒ–åç»Ÿä¸€é€»è¾‘**ï¼š
```typescript
// é˜…è¯»å®Œæˆåç»Ÿä¸€è¿›å…¥åœºæ™¯ç»ƒä¹ æ¨¡å¼
router.push(`/content/${contentType}/${contentId}/practice`);
```

**å¥½å¤„**ï¼š
- âœ… å•ç« èŠ‚å’Œå¤šç« èŠ‚ä½“éªŒä¸€è‡´
- âœ… æ‰€æœ‰å†…å®¹ç±»å‹éƒ½è¿›å…¥æ²‰æµ¸å¼åœºæ™¯å¯¹è¯
- âœ… ç”¨æˆ·è·¯å¾„ç®€åŒ–ï¼Œå‡å°‘å›°æƒ‘

---

## ğŸ¯ Promptè®¾è®¡ç†å¿µ

### å‚è€ƒä¸šå†…æœ€ä½³å®è·µ

#### 1. Dungeon AIçš„åœºæ™¯å™äº‹
- **ç¯å¢ƒä½œä¸ºè§’è‰²**ï¼šåœºæ™¯ä¸æ˜¯èƒŒæ™¯ï¼Œæ˜¯å¯¹è¯çš„å‚ä¸è€…
- **Show, Don't Tell**ï¼šç”¨åŠ¨ä½œå’Œå˜åŒ–å±•ç¤ºæƒ…ç»ª
- **Present Tense**ï¼šç°åœ¨æ—¶è¥é€ å³æ—¶æ„Ÿ

#### 2. Character.AIçš„è§’è‰²æ·±åº¦
- **å†…å¿ƒç‹¬ç™½**ï¼šè®©è§’è‰²æœ‰æ€è€ƒå±‚æ¬¡
- **ä¸å®Œç¾è¯­è¨€**ï¼šæƒ…ç»ªåŒ–æ—¶è¯­æ³•å¯ä»¥ä¹±
- **æ½œå°è¯**ï¼šè¯´ä¸€å¥—æƒ³ä¸€å¥—

#### 3. è‹±è¯­æ•™å­¦éœ€æ±‚
- **A2çº§åˆ«è¯æ±‡**ï¼šç®€å•ä½†æœ‰åŠ›
- **è‡ªç„¶å£è¯­**ï¼šçŸ­å¥ã€åœé¡¿ã€é‡å¤
- **æ–‡åŒ–æµ¸æ¶¦**ï¼šé€šè¿‡åœºæ™¯å­¦ä¹ ï¼Œä¸æ˜¯é€šè¿‡è¯¾æœ¬

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœé¢„æœŸ

### åœºæ™¯åˆ»ç”»è´¨é‡
| ç»´åº¦ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| ç¯å¢ƒæå†™ | 0-10è¯ | 20-40è¯ | +300% |
| æ„Ÿå®˜ç»†èŠ‚ | 1ç§ | 3-4ç§ | +300% |
| è§’è‰²åŠ¨ä½œ | å°‘é‡ | ä¸°å¯Œ | +400% |
| å†…å¿ƒæ´»åŠ¨ | æ—  | 10-15è¯ | âˆ |

### å¯¹è¯è‡ªç„¶åº¦
| ç»´åº¦ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| å¥å­é•¿åº¦ | é•¿å¥ä¸ºä¸» | çŸ­å¥+ç¢ç‰‡ | +è‡ªç„¶æ„Ÿ |
| è¯­æ³•å®Œç¾åº¦ | 100% | 70-90% | +çœŸå®æ„Ÿ |
| æƒ…ç»ªè¡¨è¾¾ | è¯æ±‡ | è¯­æ³•+æ ‡ç‚¹ | +å±‚æ¬¡æ„Ÿ |
| æ½œå°è¯ | æ—  | ä¸°å¯Œ | +æ·±åº¦ |

### ç”¨æˆ·ä½“éªŒ
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| Loadingç­‰å¾…æ„Ÿå— | æ¯ç‡¥ | æœŸå¾… | æ­£å‘è½¬å˜ |
| æ²‰æµ¸æ„Ÿ | 6/10 | 9/10 | +50% |
| è·¯å¾„æ¸…æ™°åº¦ | æ··ä¹± | æ¸…æ™° | ç»Ÿä¸€ |
| åœºæ™¯"æ´»"çš„æ„Ÿè§‰ | 3/10 | 9/10 | +200% |

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ–‡ä»¶ä¿®æ”¹æ¸…å•

#### 1. `/src/services/scene.service.ts`
- **ä¿®æ”¹**ï¼š`buildEvaluationPrompt` æ–¹æ³•
- **å˜æ›´**ï¼š185è¡Œ â†’ 377è¡Œï¼ˆ+192è¡Œï¼‰
- **æ ¸å¿ƒ**ï¼šåŠ å…¥CINEMATIC RESPONSE FORMATæŒ‡å¯¼

#### 2. `/src/app/(main)/content/[type]/[id]/read/page.tsx`
- **ä¿®æ”¹**ï¼š`handleComplete` æ–¹æ³•
- **å˜æ›´**ï¼š3è¡Œæ”¹ä¸º1è¡Œç»Ÿä¸€é€»è¾‘
- **æ ¸å¿ƒ**ï¼šæ‰€æœ‰å†…å®¹é˜…è¯»åéƒ½è¿›å…¥practice

#### 3. `/src/components/quest/scene-practice.tsx`
- **ä¿®æ”¹**ï¼šLoadingçŠ¶æ€UI
- **å˜æ›´**ï¼š15è¡Œ â†’ 106è¡Œï¼ˆ+91è¡Œï¼‰
- **æ ¸å¿ƒ**ï¼šç”µå½±åŒ–loadingåŠ¨ç”»

### ä¿æŒä¸å˜çš„æ ¸å¿ƒåŠŸèƒ½

âœ… **è¯„åˆ†ç³»ç»Ÿ**ï¼š4ç»´åº¦è¯„åˆ†é€»è¾‘å®Œå…¨ä¿ç•™
âœ… **è½®æ¬¡æ§åˆ¶**ï¼š5è½®å¯¹è¯é™åˆ¶ä¸å˜
âœ… **é€šè¿‡æ ‡å‡†**ï¼š80åˆ†åŠæ ¼çº¿ä¸å˜
âœ… **ç»“ç®—æµç¨‹**ï¼šSettlement â†’ Shareé€»è¾‘ä¸å˜
âœ… **å¤šç« èŠ‚ç®¡ç†**ï¼šChapter progressè¿½è¸ªä¸å˜

---

## ğŸ¬ ä½¿ç”¨ç¤ºä¾‹

### ä¼˜åŒ–åçš„å…¸å‹å¯¹è¯æµç¨‹

**Round 1: ç”¨æˆ·è¾“å…¥**
```
I can't believe this is happening!
```

**AIå›åº”ï¼ˆæ–°æ ¼å¼ï¼‰**ï¼š
```
The cupboard door rattles. Dust motes swirl in the crack of light seeping under. 
Outside, Dudley's footsteps pound past, each one making the walls shake. 
My heart hammers against my ribs.

(They can't keep me here forever. Can they?)

"Neither can I." My voice sounds small, swallowed by the darkness. 
"But it's real. The letter. The owl. All of it."
```

**ç”¨æˆ·ä½“éªŒ**ï¼š
- ğŸ¬ çœ‹åˆ°äº†åœºæ™¯ï¼ˆcupboard, dust, lightï¼‰
- ğŸ‘‚ å¬åˆ°äº†å£°éŸ³ï¼ˆdoor rattles, footsteps poundï¼‰
- ğŸ’“ æ„Ÿå—åˆ°äº†æƒ…ç»ªï¼ˆheart hammersï¼‰
- ğŸ—£ï¸ å¬åˆ°äº†è‡ªç„¶å¯¹è¯ï¼ˆvoice sounds smallï¼‰
- ğŸ’­ çª¥è§äº†å†…å¿ƒï¼ˆThey can't keep me here foreverï¼‰

---

## ğŸš€ æœªæ¥ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸï¼ˆå·²å®Œæˆï¼‰
- âœ… Promptå‡çº§ï¼šåœºæ™¯+å¯¹è¯èåˆ
- âœ… Loadingä¼˜åŒ–ï¼šç”µå½±åŒ–è¿‡æ¸¡
- âœ… æµç¨‹ç»Ÿä¸€ï¼šå•å¤šç« èŠ‚ä¸€è‡´

### ä¸­æœŸï¼ˆå»ºè®®ï¼‰
- ğŸ”„ **AIè¯­éŸ³ç”Ÿæˆ**ï¼šé…åˆåœºæ™¯æå†™çš„èƒŒæ™¯éŸ³æ•ˆ
- ğŸ¨ **åŠ¨æ€èƒŒæ™¯**ï¼šæ ¹æ®åœºæ™¯æå†™å˜åŒ–èƒŒæ™¯
- ğŸ“Š **åœºæ™¯è´¨é‡è¯„åˆ†**ï¼šè¯„ä¼°AIç”Ÿæˆçš„åœºæ™¯ä¸°å¯Œåº¦
- ğŸ­ **å¤šè§’è‰²å¯¹è¯**ï¼šä¸€ä¸ªåœºæ™¯å¤šä¸ªNPC

### é•¿æœŸï¼ˆæ„¿æ™¯ï¼‰
- ğŸ® **é€‰æ‹©åˆ†æ”¯**ï¼šDungeon AIå¼çš„æ•…äº‹èµ°å‘é€‰æ‹©
- ğŸŒ **æŒä¹…åŒ–ä¸–ç•Œ**ï¼šè®°ä½ä¹‹å‰åœºæ™¯çš„çŠ¶æ€
- ğŸ¯ **ä¸ªæ€§åŒ–åœºæ™¯**ï¼šæ ¹æ®ç”¨æˆ·æ°´å¹³è°ƒæ•´åœºæ™¯å¤æ‚åº¦
- ğŸ“– **ç”¨æˆ·åˆ›ä½œ**ï¼šè®©ç”¨æˆ·ä¸Šä¼ è‡ªå·±çš„å°è¯´ç”Ÿæˆåœºæ™¯

---

## ğŸ“ æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- âœ… å•ç« èŠ‚novelé˜…è¯» â†’ practiceæµç¨‹
- âœ… å•ç« èŠ‚questé˜…è¯» â†’ practiceæµç¨‹
- âœ… å¤šç« èŠ‚questå®Œæ•´æµç¨‹
- âœ… LoadingåŠ¨ç”»æµç•…æ€§
- âœ… åœºæ™¯å¯¹è¯åŒ…å«æå†™+å¯¹è¯
- âœ… è¯„åˆ†ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- âœ… Settlementæ­£å¸¸æ˜¾ç¤º
- âœ… æ„å»ºæ— é”™è¯¯

### ç”¨æˆ·ä½“éªŒæµ‹è¯•
- ğŸ“‹ ç­‰å¾…æ—¶é—´æ„Ÿå—ï¼ˆé¢„æœŸï¼šæœŸå¾…æ„Ÿè€Œéæ— èŠï¼‰
- ğŸ“‹ åœºæ™¯æ²‰æµ¸æ„Ÿï¼ˆé¢„æœŸï¼šèº«ä¸´å…¶å¢ƒï¼‰
- ğŸ“‹ å¯¹è¯è‡ªç„¶åº¦ï¼ˆé¢„æœŸï¼šåƒçœŸäººï¼‰
- ğŸ“‹ å­¦ä¹ æ•ˆæœï¼ˆé¢„æœŸï¼šä¸è§‰å¾—åœ¨å­¦è‹±è¯­ï¼‰

---

## ğŸ‰ æ€»ç»“

è¿™æ¬¡ä¼˜åŒ–å®ç°äº†ä¸‰å¤§çªç ´ï¼š

1. **ä»"èŠå¤©"åˆ°"æ¼”æˆ"**
   - AIä¸å†åªæ˜¯å›å¤ï¼Œè€Œæ˜¯å’Œä½ å…±åŒæ¼”ä¸€åœºæˆ
   - æ¯è½®å¯¹è¯éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”µå½±åœºæ™¯

2. **ä»"ç­‰å¾…"åˆ°"æœŸå¾…"**
   - Loadingä¸å†æ˜¯ç…ç†¬ï¼Œè€Œæ˜¯ä»ªå¼æ„Ÿçš„ä¸€éƒ¨åˆ†
   - è§†è§‰åé¦ˆè®©ç­‰å¾…å˜æˆæ‚¬å¿µ

3. **ä»"åˆ†è£‚"åˆ°"ç»Ÿä¸€"**
   - æ— è®ºä»€ä¹ˆå†…å®¹ï¼Œä½“éªŒè·¯å¾„ä¸€è‡´
   - ç”¨æˆ·å¿ƒæ™ºæ¨¡å‹ç®€åŒ–

**æ ¸å¿ƒç†å¿µ**ï¼šå­¦ä¹ è‹±è¯­çš„æœ€å¥½æ–¹å¼ï¼Œæ˜¯å¿˜è®°è‡ªå·±åœ¨å­¦è‹±è¯­ã€‚

---

*Optimization Date: 2025-10-29*
*Version: v0.3-dev*
*Based on: Dungeon AI + Character.AI Best Practices*

